<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<include file="public/head" />
	</head>
	<body>
		<div class="content-wrap">
			<div class="content">
				<form action="post" enctype="multipart/form-data">
					<table class="form-table">
						<tr>
							<th>* 标题：</th>
							<td><input type="text" value="" name="post_title" /></td>
							<td rowspan="4"></td>
						</tr>
						<tr>
							<th>转载来源：<small>（不填则为原创）</small></th>
							<td><input type="text" value="" name="post_title" /></td>
						</tr>
						<tr>
							<th>* 状态：</th>
							<td>
								<select name="status">
									<option value="1">发布</option>
									<option value="0">隐藏</option>
								</select>
							</td>
						</tr>
						<tr>
							<th>* 缩略图：<small>（100*100）</small></th>
							<td>
								<select name="thumb_type" onchange='$(this).siblings("input").toggle();'>
									<option value="1">自动生成</option>
									<option value="0">自定义</option>
								</select>
								<input type="file" name="post_thumbnail" style="display: none;" />
							</td>
						</tr>
						<tr>
							<th>* 分类：</th>
							<td>
								<input type="text" value=""  readOnly="readOnly" onclick="chooseCates(this)" />
								<input type="hidden" value="" name="post_cats" />
								<div id="cate-list" data-load="false">
									<ul></ul>
								</div>
							</td>
						</tr>
						<tr>
							<th>标签：</th>
							<td><input type="text" value="" name="post_tags" /></td>
						</tr>
					</table>
					<p>
						<textarea id="container" style="width: 80%;height:400px;"></textarea>
					</p>
				</form>
			</div>
		</div>
		<js href="__PUBLIC__/Admin/ueditor/ueditor.config.js" />    
		<js href="__PUBLIC__/Admin/ueditor/ueditor.all.min.js" />
		<script>
			$(function(){
				var ue = UE.getEditor('container',{
					serverUrl :"{:U('Index/ueditor')}"
				});
			});
			/**
			 * 选择分类
			 */
			function chooseCates(obj){
				var cateList = $('#cate-list');
				if(cateList.data("load")){
					cateList.show();
					return;
				}
				$.getJSON('{:U("Category/ajaxList")}',function(data){
					var cateListItems = "";
					for(var i in data){
						cateListItems += '<li data-id='+data[i].id+'>'+data[i].cate_name+'</li>';
					}
					cateList.children('ul').html(cateListItems);
					cateList.show();
				});
			}
		</script>
	</body>
</html>